# call和apply的模拟实现

## 定义

### call
>call() 方法使用一个指定的 this 值和单独给出的一个或多个参数来调用一个函数。
### apply
>apply() 方法调用一个具有给定this值的函数，以及作为一个数组（或类似数组对象）提供的参数。
### call和apply的区别
共同点：
函数调用call和apply,更改函数this的指向。
不同点：
传参方式不同。apply传参是传数组。

## call和apply的使用
```javascript
var foo = {
    value: 1
};

function bar() {
    console.log(this.value);
}

bar.call(foo); // 1
```
执行bar，调用call方法，将bar函数中的this指向foo对象。
以上例子可以理解为，把bar作为foo的一个属性。并且执行foo.bar

```javascript
    var foo = {
        vaule: 1,
        bar: function() {
            console.log(this.value)
        }
    }
    bar.foo()
```
这样的方式调用和调用call的结果是一样的。
所以call的模拟实现。可以把它理解为以上这种形式。因此模拟的步骤可以分为以下几步：
1. 将函数设为对象的属性。
2. 执行该函数。
3. 删除改属性。

模拟实现代码：
```javascript
Function.prototype.call1 = function(context) {
    // 拿到调用call的函数
    var context = context || window // 当context传入null，让context指向window
    context.fn = this // context为调用call时传入的第一个值。
    // 拿到调用call时传入的第二个到最后一个值
    let arr = []
    for(let i = 1; i < arguments.length; i++) {
        arr.push(arguments[i])
    }
    // 执行函数
    var result = context.fn(...arr)
    delete context.fn
    return result
}
```
用一个例子来检验一下上面的代码：
```javascript                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
function bar(name, age) {
    console.log(name)
    console.log(age)
    console.log(this.value)
}
bar.call1(foo, 'liaozhen', 25) // 'liaozhen', 25, 1
```
至此，call的模拟实现已完成。apply的模拟实现，只是传参不同。
